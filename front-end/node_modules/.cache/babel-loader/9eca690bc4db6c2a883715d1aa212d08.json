{"ast":null,"code":"import _slicedToArray from\"/home/sam/Documents/flipic/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/home/sam/Documents/flipic/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2;import React,{useEffect,useState}from'react';import Quiz from'./Quiz';import Loader from'../../Loader/Loader';import styled from'styled-components';import theme from'../../Theme/theme';import GetStartedOverlay from'../../getStartedOverlay/GetStartedOverlay';import QuizResult from'./QuizResult';// import LoadingPage from '../LoadingPage/LoadingPage';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StyledPara=styled.p(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n\\tmargin-top: 24px;\\n\\tfont-weight: bold;\\n\\ttext-align: center;\\n\"])));var StyledLoader=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n\\twidth: 100vw;\\n\\theight: 100vh;\\n\\tbackground-color: \",\";\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tjustify-content: center;\\n\\talign-items: center;\\n\"])),theme.color.background.primary);var setCookie=function setCookie(cname,cvalue,exdays){var d=new Date();d.setTime(d.getTime()+exdays*24*60*60*1000);var expires=\"expires=\"+d.toUTCString();document.cookie=cname+\"=\"+cvalue+\";\"+expires+\";path=/\";};var QuizStageContoller=function QuizStageContoller(props){// Get initial quiz info and first two pairs of cards\nvar quizId=props.quizId;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),quizInfo=_useState2[0],getQuizInfo=_useState2[1];useEffect(function(){fetch('https://www.flipic.net/api/quiz/'+quizId).then(function(response){return response.json();}).then(function(data){// console.log(data);\ngetQuizInfo(data);}).catch(function(error){console.error('Error:',error);});},[quizId]);var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),frontPair=_useState4[0],setFront=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),backPair=_useState6[0],setBack=_useState6[1];useEffect(function(){fetch('https://www.flipic.net/api/quiz-matchup/'+quizId).then(function(response){return response.json();}).then(function(data){// console.log(data);\nsetFront(data);}).catch(function(error){console.error('Error:',error);});},[quizId]);useEffect(function(){fetch('https://www.flipic.net/api/quiz-matchup/'+quizId).then(function(response){return response.json();}).then(function(data){// console.log(data);\nsetBack(data);}).catch(function(error){console.error('Error:',error);});},[quizId]);// control the when to show the welcome page and the result page \nvar _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),welcomed=_useState8[0],setWelcomed=_useState8[1];var handleWelcomed=function handleWelcomed(){setWelcomed(true);};var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),quizDone=_useState10[0],setDone=_useState10[1];// if quizDone then set client-side cookie and show result, otherwise show next page\n// if welcomed then do no show the welcome page, otherwise show welcome page\nif(!quizDone){if(quizInfo!==null&&frontPair!==null&&backPair!==null){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Quiz,{quizInfo:quizInfo,frontPair:frontPair,backPair:backPair,setFront:setFront,setBack:setBack,setDone:setDone}),welcomed?null:/*#__PURE__*/_jsx(GetStartedOverlay,{handleWelcomed:handleWelcomed,author:quizInfo.data.quizCreator})]});}else{return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(StyledLoader,{children:[/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsx(StyledPara,{children:\"Loading...\"})]})})// <LoadingPage />\n;}}else{var cname='flipic_'+quizInfo.data._id;var value=true;var exdays=30;setCookie(cname,value,exdays);return/*#__PURE__*/_jsx(QuizResult,{quizId:quizId,didBefore:false,userName:null});}};export default QuizStageContoller;","map":{"version":3,"sources":["/home/sam/Documents/flipic/front-end/src/components/pages/Quiz/QuizStageContoller.js"],"names":["React","useEffect","useState","Quiz","Loader","styled","theme","GetStartedOverlay","QuizResult","StyledPara","p","StyledLoader","div","color","background","primary","setCookie","cname","cvalue","exdays","d","Date","setTime","getTime","expires","toUTCString","document","cookie","QuizStageContoller","props","quizId","quizInfo","getQuizInfo","fetch","then","response","json","data","catch","error","console","frontPair","setFront","backPair","setBack","welcomed","setWelcomed","handleWelcomed","quizDone","setDone","quizCreator","_id","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Quiz from './Quiz';\nimport Loader from '../../Loader/Loader';\nimport styled from 'styled-components';\nimport theme from '../../Theme/theme';\nimport GetStartedOverlay from '../../getStartedOverlay/GetStartedOverlay';\nimport QuizResult from './QuizResult';\n// import LoadingPage from '../LoadingPage/LoadingPage';\n\nconst StyledPara = styled.p`\n\tmargin-top: 24px;\n\tfont-weight: bold;\n\ttext-align: center;\n`;\n\nconst StyledLoader = styled.div`\n\twidth: 100vw;\n\theight: 100vh;\n\tbackground-color: ${theme.color.background.primary};\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n`;\n\nconst setCookie = (cname, cvalue, exdays) => {\n\tconst d = new Date();\n\td.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\n\tlet expires = \"expires=\"+d.toUTCString();\n\tdocument.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\n}\n\nconst QuizStageContoller = props => {\n\t// Get initial quiz info and first two pairs of cards\n\tconst quizId = props.quizId;\n\tconst [quizInfo, getQuizInfo] = useState(null);\n\tuseEffect(() => {\n\t\tfetch('https://www.flipic.net/api/quiz/' + quizId)\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => {\n\t\t\t\t// console.log(data);\n\t\t\t\tgetQuizInfo(data);\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.error('Error:', error);\n\t\t\t});\n\t}, [quizId]);\n\n\tconst [frontPair, setFront] = useState(null);\n\tconst [backPair, setBack] = useState(null);\n\tuseEffect(() => {\n\t\tfetch('https://www.flipic.net/api/quiz-matchup/' + quizId)\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => {\n\t\t\t\t// console.log(data);\n\t\t\t\tsetFront(data);\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.error('Error:', error);\n\t\t\t});\n\t}, [quizId]);\n\n\tuseEffect(() => {\n\t\tfetch('https://www.flipic.net/api/quiz-matchup/' + quizId)\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => {\n\t\t\t\t// console.log(data);\n\t\t\t\tsetBack(data);\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.error('Error:', error);\n\t\t\t});\n\t}, [quizId]);\n\n\n\t// control the when to show the welcome page and the result page \n\tconst [welcomed, setWelcomed] = useState(false);\n\tconst handleWelcomed = () => {\n\t\tsetWelcomed(true);\n\t};\n\tconst [quizDone, setDone] = useState(false);\n\t\n\t// if quizDone then set client-side cookie and show result, otherwise show next page\n\t// if welcomed then do no show the welcome page, otherwise show welcome page\n\tif (!quizDone) {\n\t\tif (quizInfo !== null && frontPair !== null && backPair !== null) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<Quiz\n\t\t\t\t\t\tquizInfo={quizInfo}\n\t\t\t\t\t\tfrontPair={frontPair}\n\t\t\t\t\t\tbackPair={backPair}\n\t\t\t\t\t\tsetFront={setFront}\n\t\t\t\t\t\tsetBack={setBack}\n\t\t\t\t\t\tsetDone={setDone}\n\t\t\t\t\t/>\n\t\t\t\t\t{welcomed ? null : (\n\t\t\t\t\t\t<GetStartedOverlay handleWelcomed={handleWelcomed} author={quizInfo.data.quizCreator} />\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t);\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<StyledLoader>\n\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t<StyledPara>Loading...</StyledPara>\n\t\t\t\t\t</StyledLoader>\n\t\t\t\t</>\n\t\t\t\t// <LoadingPage />\n\t\t\t);\n\t\t}\n\t} else {\n\t\tconst cname = 'flipic_' +  quizInfo.data._id;\n\t\tconst value = true;\n\t\tconst exdays = 30;\n\t\tsetCookie(cname, value, exdays);\n\t\treturn <QuizResult quizId={quizId} didBefore={false} userName={null} />;\n\t}\n};\n\nexport default QuizStageContoller;\n"]},"metadata":{},"sourceType":"module"}