{"ast":null,"code":"import _slicedToArray from\"/home/sam/Documents/flipic/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/home/sam/Documents/flipic/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8;import React,{useEffect,useState}from'react';import styled from'styled-components';import theme from'../../Theme/theme';// import bp from '../../Theme/breakpoints';\nimport Footer from'../../Navigation/Footer/Footer';import ResultBar from'../../Bar/ResultBar';import Loader from'../../Loader/Loader';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var StyledPara=styled.p(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n\\tmargin-top: 24px;\\n\\tfont-weight: bold;\\n\\ttext-align: center;\\n\"])));var StyledLoader=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n\\twidth: 100vw;\\n\\theight: 100vh;\\n\\tbackground-color: \",\";\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tjustify-content: center;\\n\\talign-items: center;\\n\"])),theme.color.background.primary);var StyledResultWrapper=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n\\theight: 80vh;\\n\\twidth: 100vw;\\n\\tpadding: 1em;\\n\\ttext-align: center;\\n\\toverflow: auto;\\n\"])));var StyledResultHeader=styled.h1(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n\\tmargin-bottom: 1em;\\n\"])));var StyledResultItem=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n\\tmargin-bottom: 1em;\\n\\tdisplay: flex;\\n\"])));var StyledResultIcon=styled.p(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n\\twidth: 10vw;\\n\\tfont-size: 1.5em;\\n\\tmargin-right: 3vw;\\n\"])));var StyledResultContent=styled.div(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\ttext-align: left;\\n\\twidth: 80vw;\\n\"])));var StyledResultName=styled.p(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n\\tfont-size: 1.2em;\\n\\tcolor: \",\";\\n\\tfont-weight: bold;\\n\"])),theme.color.background.secondary);// const StyledResultNum = styled.p`\n//     font-size: 1.2em;\n//     color: ${theme.color.background.secondary};\n//     font-weight: bold;\n//     margin-left: 1em;\n// `\n// fetch result and show result after 1.5s loading time\nvar QuizResult=function QuizResult(_ref){var quizId=_ref.quizId,didBefore=_ref.didBefore,userName=_ref.userName;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),result=_useState2[0],getQuizResult=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showResult=_useState4[0],setShowResult=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),creator=_useState6[0],setCreator=_useState6[1];useEffect(function(){fetch('https://www.flipic.net/api/quiz-results/'+quizId).then(function(response){return response.json();}).then(function(data){// console.log(data);\ngetQuizResult(data);}).catch(function(error){console.error('Error:',error);});},[quizId]);var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),publicQuiz=_useState8[0],setPublic=_useState8[1];useEffect(function(){fetch('https://www.flipic.net/api/quiz/'+quizId).then(function(response){return response.json();}).then(function(data){var privacyType=data.data.privacyType;if(privacyType==='Private'){setPublic(false);setCreator(data.data.quizCreator);}else{setPublic(true);}}).catch(function(error){console.error('Error:',error);});},[]);// console.log(userName);\nsetTimeout(function(){return setShowResult(true);},1500);if(publicQuiz!==null){if(publicQuiz||userName===creator){if(result!==null&showResult){var total=0;result.data.map(function(item){total+=item.numSuccess;});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(StyledResultWrapper,{children:[/*#__PURE__*/_jsx(StyledResultHeader,{children:\"Results\"}),result.data.map(function(item,i){var percentage=0;if(total!==0){percentage=item.numSuccess/total;}return/*#__PURE__*/_jsxs(StyledResultItem,{children:[/*#__PURE__*/_jsx(StyledResultIcon,{children:item.emoji}),/*#__PURE__*/_jsxs(StyledResultContent,{children:[/*#__PURE__*/_jsx(StyledResultName,{children:item.item}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',marginTop:'1em'},children:/*#__PURE__*/_jsx(ResultBar,{percentage:percentage,index:i})})]})]},i);})]}),/*#__PURE__*/_jsx(Footer,{})]});}else{return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(StyledLoader,{children:[/*#__PURE__*/_jsx(Loader,{}),didBefore?/*#__PURE__*/_jsx(_Fragment,{}):/*#__PURE__*/_jsx(StyledPara,{children:\"Thank you for taking the survey!\"}),/*#__PURE__*/_jsx(StyledPara,{children:\"Loading survey results...\"})]})});}}else{return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(StyledLoader,{children:[didBefore?/*#__PURE__*/_jsx(_Fragment,{}):/*#__PURE__*/_jsx(StyledPara,{children:\"Thank you for taking the survey!\"}),/*#__PURE__*/_jsx(StyledPara,{children:\"The result is not public...\"})]})});}}else{return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(StyledLoader,{children:[/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsx(StyledPara,{children:\"Loading...\"})]})});}};export default QuizResult;","map":{"version":3,"sources":["/home/sam/Documents/flipic/front-end/src/components/pages/Quiz/QuizResult.js"],"names":["React","useEffect","useState","styled","theme","Footer","ResultBar","Loader","StyledPara","p","StyledLoader","div","color","background","primary","StyledResultWrapper","StyledResultHeader","h1","StyledResultItem","StyledResultIcon","StyledResultContent","StyledResultName","secondary","QuizResult","quizId","didBefore","userName","result","getQuizResult","showResult","setShowResult","creator","setCreator","fetch","then","response","json","data","catch","error","console","publicQuiz","setPublic","privacyType","quizCreator","setTimeout","total","map","item","numSuccess","i","percentage","emoji","display","marginTop"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport theme from '../../Theme/theme';\n// import bp from '../../Theme/breakpoints';\nimport Footer from '../../Navigation/Footer/Footer';\nimport ResultBar from '../../Bar/ResultBar';\nimport Loader from '../../Loader/Loader';\n\nconst StyledPara = styled.p`\n\tmargin-top: 24px;\n\tfont-weight: bold;\n\ttext-align: center;\n`;\n\nconst StyledLoader = styled.div`\n\twidth: 100vw;\n\theight: 100vh;\n\tbackground-color: ${theme.color.background.primary};\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n`;\n\nconst StyledResultWrapper = styled.div`\n\theight: 80vh;\n\twidth: 100vw;\n\tpadding: 1em;\n\ttext-align: center;\n\toverflow: auto;\n`;\n\nconst StyledResultHeader = styled.h1`\n\tmargin-bottom: 1em;\n`;\n\nconst StyledResultItem = styled.div`\n\tmargin-bottom: 1em;\n\tdisplay: flex;\n`;\n\nconst StyledResultIcon = styled.p`\n\twidth: 10vw;\n\tfont-size: 1.5em;\n\tmargin-right: 3vw;\n`;\n\nconst StyledResultContent = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\ttext-align: left;\n\twidth: 80vw;\n`;\n\nconst StyledResultName = styled.p`\n\tfont-size: 1.2em;\n\tcolor: ${theme.color.background.secondary};\n\tfont-weight: bold;\n`;\n\n// const StyledResultNum = styled.p`\n//     font-size: 1.2em;\n//     color: ${theme.color.background.secondary};\n//     font-weight: bold;\n//     margin-left: 1em;\n// `\n\n// fetch result and show result after 1.5s loading time\nconst QuizResult = ({ quizId, didBefore, userName }) => {\n\tconst [result, getQuizResult] = useState(null);\n\tconst [showResult, setShowResult] = useState(false);\n    const [creator, setCreator] = useState(null);\n\n\tuseEffect(() => {\n\t\tfetch('https://www.flipic.net/api/quiz-results/' + quizId)\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => {\n\t\t\t\t// console.log(data);\n\t\t\t\tgetQuizResult(data);\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.error('Error:', error);\n\t\t\t});\n\t}, [quizId]);\n\n\tconst [publicQuiz, setPublic] = useState(null);\n\tuseEffect(() => {\n\t\tfetch('https://www.flipic.net/api/quiz/' + quizId)\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => {\n\t\t\t\tconst privacyType = data.data.privacyType;\n\t\t\t\tif (privacyType === 'Private') {\n\t\t\t\t\tsetPublic(false);\n                    setCreator(data.data.quizCreator);\n\t\t\t\t} else {\n\t\t\t\t\tsetPublic(true);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.error('Error:', error);\n\t\t\t});\n\t}, []);\n\n    // console.log(userName);\n\n\tsetTimeout(() => setShowResult(true), 1500);\n\n\tif (publicQuiz !== null) {\n\t\tif (publicQuiz || userName === creator) {\n\t\t\tif ((result !== null) & showResult) {\n\t\t\t\tlet total = 0;\n\t\t\t\tresult.data.map(item => {\n\t\t\t\t\ttotal += item.numSuccess;\n\t\t\t\t});\n\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<StyledResultWrapper>\n\t\t\t\t\t\t\t<StyledResultHeader>Results</StyledResultHeader>\n\t\t\t\t\t\t\t{result.data.map((item, i) => {\n                                let percentage = 0\n                                if (total !== 0) {\n                                    percentage = item.numSuccess / total;\n                                } \n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<StyledResultItem key={i}>\n\t\t\t\t\t\t\t\t\t\t<StyledResultIcon>{item.emoji}</StyledResultIcon>\n\t\t\t\t\t\t\t\t\t\t<StyledResultContent>\n\t\t\t\t\t\t\t\t\t\t\t<StyledResultName>{item.item}</StyledResultName>\n\t\t\t\t\t\t\t\t\t\t\t<div style={{ display: 'flex', marginTop: '1em' }}>\n\t\t\t\t\t\t\t\t\t\t\t\t<ResultBar percentage={percentage} index={i}></ResultBar>\n\t\t\t\t\t\t\t\t\t\t\t\t{/* <StyledResultNum index={i}>{item.numSuccess}</StyledResultNum> */}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</StyledResultContent>\n\t\t\t\t\t\t\t\t\t</StyledResultItem>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</StyledResultWrapper>\n\t\t\t\t\t\t<Footer />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<StyledLoader>\n\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t{didBefore ? <></> : <StyledPara>Thank you for taking the survey!</StyledPara>}\n\t\t\t\t\t\t\t<StyledPara>Loading survey results...</StyledPara>\n\t\t\t\t\t\t</StyledLoader>\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<StyledLoader>\n\t\t\t\t\t\t{didBefore ? <></> : <StyledPara>Thank you for taking the survey!</StyledPara>}\n\t\t\t\t\t\t<StyledPara>The result is not public...</StyledPara>\n\t\t\t\t\t</StyledLoader>\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\t} else {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<StyledLoader>\n\t\t\t\t\t<Loader />\n\t\t\t\t\t<StyledPara>Loading...</StyledPara>\n\t\t\t\t</StyledLoader>\n\t\t\t</>\n\t\t);\n\t}\n};\n\nexport default QuizResult;\n"]},"metadata":{},"sourceType":"module"}